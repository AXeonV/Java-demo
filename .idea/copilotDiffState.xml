<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/ShoppingCart.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/ShoppingCart.java" />
              <option name="originalContent" value="import java.util.ArrayList;&#10;&#10;public class ShoppingCart {&#10;  private Member member;&#10;  private Supermarket supermarket;&#10;  private ArrayList&lt;CartItem&gt; items;&#10;&#10;  public ShoppingCart(Member m, Supermarket s) {&#10;    this.member = m;&#10;    this.supermarket = s;&#10;    this.items = new ArrayList&lt;&gt;();&#10;  }&#10;&#10;  public ArrayList&lt;CartItem&gt; getItems() {&#10;    return items;&#10;  }&#10;&#10;  public void add(String productName, int qty) {&#10;    Product p = supermarket.getProduct(productName);&#10;    if (p == null) return;&#10;    for (CartItem item : items)&#10;      if (item.getProduct().getName().equals(productName)) {&#10;        int requiredQty = item.getQuantity() + qty;&#10;        if (requiredQty &gt; p.getStockQuantity()) return;&#10;        item.addQuantity(qty);&#10;        return;&#10;      }&#10;    if (qty &gt; p.getStockQuantity()) return;&#10;    items.add(new CartItem(p, qty));&#10;  }&#10;&#10;  public void show() {&#10;    int totalPrice = 0;&#10;    for (CartItem item : items) {&#10;      System.out.println(item);&#10;      totalPrice += item.getSubtotal();&#10;    }&#10;    System.out.println(&quot;Total: $&quot; + totalPrice);&#10;  }&#10;&#10;  public void checkout(boolean usePoints) {&#10;    int rawTotal = 0;&#10;    for (CartItem item : items)&#10;      rawTotal += item.getSubtotal();&#10;    int maxSafeDeduction = 0;&#10;    if (usePoints) maxSafeDeduction = member.usePoints(rawTotal);&#10;    for (CartItem item : items)&#10;      supermarket.reduceStock(item.getProduct().getName(), item.getQuantity());&#10;    int finalTotal = rawTotal - maxSafeDeduction;&#10;    member.addPoints(finalTotal);&#10;    // Print receipt before clearing the cart so items and totals are shown&#10;    System.out.println(&quot;=== Checkout Receipt ===&quot;);&#10;    show();&#10;    System.out.printf(&quot;Points used: $%d (%d points)\n&quot;, maxSafeDeduction, maxSafeDeduction);&#10;    System.out.printf(&quot;Final Total: $%d\n&quot;, finalTotal);&#10;    System.out.printf(&quot;Points earned: %d\n&quot;, finalTotal);&#10;    System.out.println(&quot;===&quot;);&#10;    // Clear the cart contents (keep the list object)&#10;    items.clear();&#10;  }&#10;&#10;  public void checkout() {&#10;    checkout(false);&#10;  }&#10;}&#10;" />
              <option name="updatedContent" value="import java.util.ArrayList;&#10;&#10;public class ShoppingCart {&#10;  private Member member;&#10;  private Supermarket supermarket;&#10;  private ArrayList&lt;CartItem&gt; items;&#10;&#10;  public ShoppingCart(Member m, Supermarket s) {&#10;    this.member = m;&#10;    this.supermarket = s;&#10;    this.items = new ArrayList&lt;&gt;();&#10;  }&#10;&#10;  public ArrayList&lt;CartItem&gt; getItems() {&#10;    return items;&#10;  }&#10;&#10;  public void add(String productName, int qty) {&#10;    Product p = supermarket.getProduct(productName);&#10;    if (p == null) return;&#10;    for (CartItem item : items)&#10;      if (item.getProduct().getName().equals(productName)) {&#10;        int requiredQty = item.getQuantity() + qty;&#10;        if (requiredQty &gt; p.getStockQuantity()) return;&#10;        item.addQuantity(qty);&#10;        return;&#10;      }&#10;    if (qty &gt; p.getStockQuantity()) return;&#10;    items.add(new CartItem(p, qty));&#10;  }&#10;&#10;  public void show() {&#10;    int totalPrice = 0;&#10;    for (CartItem item : items) {&#10;      System.out.println(item);&#10;      totalPrice += item.getSubtotal();&#10;    }&#10;    System.out.println(&quot;Total: $&quot; + totalPrice);&#10;  }&#10;&#10;  public void checkout(boolean usePoints) {&#10;    int rawTotal = 0;&#10;    for (CartItem item : items)&#10;      rawTotal += item.getSubtotal();&#10;    int maxSafeDeduction = 0;&#10;    if (usePoints) maxSafeDeduction = member.usePoints(rawTotal);&#10;    for (CartItem item : items)&#10;      supermarket.reduceStock(item.getProduct().getName(), item.getQuantity());&#10;    int finalTotal = rawTotal - maxSafeDeduction;&#10;    member.addPoints(finalTotal);&#10;    // Print receipt before clearing the cart so items and totals are shown&#10;    System.out.println(&quot;=== Checkout Receipt ===&quot;);&#10;    show();&#10;    System.out.printf(&quot;Points used: $%d (%d points)\n&quot;, maxSafeDeduction, maxSafeDeduction);&#10;    System.out.printf(&quot;Final Total: $%d\n&quot;, finalTotal);&#10;    System.out.printf(&quot;Points earned: %d\n&quot;, finalTotal);&#10;    System.out.println(&quot;===&quot;);&#10;    // Clear the cart contents (keep the list object)&#10;    items.clear();&#10;  }&#10;&#10;  public void checkout() {&#10;    checkout(false);&#10;  }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/TestShoppingCartMain.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/TestShoppingCartMain.java" />
              <option name="updatedContent" value="public class TestShoppingCartMain {&#10;  public static void main(String[] args) {&#10;    Supermarket s = new Supermarket();&#10;    Member m = new Member(&quot;Grace&quot;);&#10;    Product p1 = new Book(&quot;Test Book&quot;, 50, 10);&#10;    Product p2 = new Food(&quot;Test Food&quot;, 5, 20);&#10;    s.addProduct(p1);&#10;    s.addProduct(p2);&#10;&#10;    ShoppingCart cart = new ShoppingCart(m, s);&#10;    cart.add(&quot;Test Book&quot;, 2); // $100&#10;    cart.add(&quot;Test Food&quot;, 5); // $25&#10;    System.out.println(&quot;Cart size before checkout: &quot; + cart.getItems().size());&#10;    int initialPoints = m.getPoints();&#10;    int initialStock1 = s.getStock(&quot;Test Book&quot;);&#10;    cart.checkout();&#10;    System.out.println(&quot;Member points after checkout: &quot; + m.getPoints() + &quot; (expected &quot; + (initialPoints + 125) + &quot;)&quot;);&#10;    System.out.println(&quot;Cart size after checkout: &quot; + cart.getItems().size());&#10;    System.out.println(&quot;Stock Test Book after checkout: &quot; + s.getStock(&quot;Test Book&quot;) + &quot; (expected &quot; + (initialStock1 - 2) + &quot;)&quot;);&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>